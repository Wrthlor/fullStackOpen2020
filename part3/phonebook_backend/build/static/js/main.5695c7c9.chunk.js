(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(1),c=t.n(a),o=t(15),u=t.n(o),i=t(6),s=t(3),l=function(e){var n=e.info,t=e.handleDelete;return Object(r.jsxs)("li",{children:[n.name," ","",n.number," ","",Object(r.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})]})},d=function(e){var n=e.people,t=e.handleDelete,a=n.map((function(e){return Object(r.jsx)(l,{info:e,handleDelete:t},e.id)}));return Object(r.jsx)("div",{children:a})},b=function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsxs)("div",{children:["Name: ",Object(r.jsx)("input",{value:e.nameValue,onChange:e.nameChange})]}),Object(r.jsxs)("div",{children:["Number: ",Object(r.jsx)("input",{value:e.numberValue,onChange:e.numberChange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add"})})]})},f=function(e){return Object(r.jsxs)("div",{children:["Filter list of names: ",Object(r.jsx)("input",{value:e.value,onChange:e.onChange})]})},h=function(e){var n=e.message,t=e.className;return null===n?null:Object(r.jsx)("div",{className:t,children:n})},j=t(4),m=t.n(j),O="/api/persons",p={getAll:function(){return m.a.get(O).then((function(e){return e.data}))},create:function(e){return m.a.post(O,e).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))}},v=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),l=u[0],j=u[1],m=Object(a.useState)(""),O=Object(s.a)(m,2),v=O[0],g=O[1],x=Object(a.useState)(""),C=Object(s.a)(x,2),w=C[0],S=C[1],N=Object(a.useState)(null),D=Object(s.a)(N,2),L=D[0],k=D[1],y=Object(a.useState)(null),P=Object(s.a)(y,2),A=P[0],I=P[1];Object(a.useEffect)((function(){p.getAll().then((function(e){return c(e)})).catch((function(e){return console.error(e)}))}),[]);var V=t.map((function(e){return e.name.toLowerCase()})),E=function(e){return e.toLowerCase().replace(/\b(\w)/g,(function(e){return e.toUpperCase()}))},J=function(e,n){k(e),I(n),setTimeout((function(){k(null),I(null)}),5e3)},B=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{value:w,onChange:function(e){return S(e.target.value)}}),Object(r.jsx)("h3",{children:"Add new profile"}),Object(r.jsx)(h,{message:L,className:A}),Object(r.jsx)(b,{handleSubmit:function(e){var n,r;e.preventDefault(),""===l?J("Please enter a name","error"):l.length<3?J("Name (".concat(l,") is shorter than the minimum length (3)."),"error"):""===v?J("Please enter a number","error"):/^(\s*|\d+-?\d*-?\d*)$/.test(v)?v.length<8?J("Number (".concat(v,") is shorter than the minimum length (8)."),"error"):(r=l,V.includes(r.toLowerCase())?(n='"'.concat(l,'" is already added to server, replace the old number with a new one?'),window.confirm(n)&&function(e,n){var r=t.find((function(n){return n.name.toLowerCase()===e.toLowerCase()})),a=r.id,o=Object(i.a)(Object(i.a)({},r),{},{number:n});p.update(a,o).then((function(n){c(t.map((function(e){return e.id!==a?e:n}))),J("".concat(E(e),"'s number has been updated"),"update")})).catch((function(n){c(t.filter((function(e){return e.id!==a}))),J('Information for "'.concat(E(e),'" has already been removed from server'),"error"),console.log(n)}))}(l,v)):function(){var e=E(l),n={name:e,number:v};p.create(n).then((function(n){c(t.concat(n)),J('"'.concat(e,'" has been added'),"update")})).catch((function(e){return console.log(e)}))}()):J("Invalid number","error"),j(""),g("")},nameValue:l,nameChange:function(e){return j(e.target.value)},numberValue:v,numberChange:function(e){return g(e.target.value)}}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(d,{people:B,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm('Delete "'.concat(n.name,'"?'))&&p.deletePerson(e).then((function(){c(t.filter((function(n){return n.id!==e}))),J('"'.concat(n.name,'" has been removed from server'),"update"),S("")})).catch((function(r){c(t.filter((function(n){return n.id!==e}))),J('Information of "'.concat(n.name,'" has already been removed from server'),"error"),console.log(r)}))}})]})};t(38);u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5695c7c9.chunk.js.map